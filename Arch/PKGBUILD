pkgname="CustomPlayer"
pkgver="0.3.4"
pkgrel=1
pkgdesc="CustomPlayer is a player aimed at convenience and configurability, written in Qt 6. "
arch=("x86_64")
license=('GPL3')
url="https://github.com/Mykhail024/CustomPlayer"
depends=("qt6-base" "pipewire")
makedepends=("cmake" "make" "libpipewire" "taglib" "libsndfile")

source=("https://github.com/Mykhail024/CustomPlayer/archive/refs/tags/v${pkgver}.tar.gz")
sha512sums=("SKIP")

prepare() {
  mkdir -p "$pkgname-$pkgver/build"
  cd "$pkgname-$pkgver/build"
  cmake ".." \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_BUILD_TYPE=Release
}

build() {
  cd "$pkgname-$pkgver/build"
  make -j2
}

package() {
  cd "$pkgname-$pkgver/build"
  make DESTDIR="${pkgdir}" install

  install -Dm644 "$srcdir/$pkgname-$pkgver/res/icon48x48.png" \
    "$pkgdir/usr/share/icons/hicolor/48x48/apps/customplayer.png"
  install -Dm644 "$srcdir/$pkgname-$pkgver/res/icon.svg" \
    "$pkgdir/usr/share/icons/hicolor/scalable/apps/customplayer.svg"
  install -Dm644 "$srcdir/$pkgname-$pkgver/res/customplayer.desktop" \
    "$pkgdir/usr/share/applications/customplayer.desktop"
}
